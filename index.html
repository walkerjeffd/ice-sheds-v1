<!DOCTYPE html>

<html>

<head>
  <meta charset="utf-8">
  <title>Interactive Catchment Explorer</title>

  <link href='http://fonts.googleapis.com/css?family=Open+Sans:600' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="bower_components/bootstrap-select/dist/css/bootstrap-select.min.css">
  <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.12.0/themes/smoothness/jquery-ui.css">
  <link rel="stylesheet" href="bower_components/leaflet/dist/leaflet.css">
  <link rel="stylesheet" href="css/main.css">
</head>

<body>
<div class="full" id="app">
  <div class="ice-header">
    <span class="brand">SHEDS: Interactive Catchment Explorer</span>
    <div class="pull-right">
      <a href="#" v-on:click="share">Share</a> |
      <a href="#" data-toggle="modal" data-target="#data-modal">Data Sources</a> |
      <a href="http://ice.ecosheds.org">ICE Home</a> |
      <a href="http://ecosheds.org">SHEDS Home</a>
    </div>
  </div>
  <div class="ice-container">
    <div class="ice-left-sidebar">
      <div class="ice-box">
        <div class="ice-box-title">Aggregation Level</div>
        <select-picker :config="config.layer.config" :options="config.layer.options" :selected="state.layer" v-on:input="selectLayer" label="label" value="id" title="Select layer..."></select-picker>
      </div>
      <div class="ice-box">
        <div class="ice-box-title">Region Filter</div>
        <select-picker :config="config.filters.region.config" :options="config.filters.region.options" :selected="state.filters.region" v-on:input="selectFiltersRegion" label="label" value="id" title="Select states..." multiple="true"></select-picker>
      </div>
      <div class="ice-box">
        <div class="ice-box-title">Display Variable</div>
        <select-picker :config="config.variable.config" :options="config.variable.options" :selected="state.variable" v-on:input="selectVariable" label="label" value="id" title="Select variable..."></select-picker>
      </div>
      <div class="ice-box">
        <div class="ice-box-title">Debug</div>
<!-- <pre>
map: {{state.map.view}}
layer: {{state.layer}}
variable: {{state.variable}}
region: {{state.filters.region}}
</pre> -->
<pre>
filters: {{state.filters.charts}}
</pre>
      </div>
    </div>
    <div class="ice-right-sidebar">
      <div class="ice-box">
        <div class="ice-box-title">Catchment Filters and Histograms</div>
        <select-picker :config="config.filters.charts.config" :options="config.filters.charts.options" :selected="state.filters.charts" v-on:input="selectFiltersCharts" label="label" value="id" title="Select filter variables..." multiple="true"></select-picker>
        <hr>
        <div is="ice-filter" v-for="filter in state.xf.filters" :key="filter.id" :id="filter.id" :range="filter.range" :variable="filter.variable" :filters="state.xf" :selected="state.selected" :get-dim="filter.getDim" :get-selected-dim="filter.getSelectedDim" v-on:brush="setFilter" v-on:destroy="removeFilter"></div>
      </div>
    </div>
    <ice-status :message="state.message"></ice-status>
    <ice-map :center="state.map.view.center" :zoom="state.map.view.zoom" :basemaps="config.map.basemaps" :overlays="config.map.overlays" :aggregation-layer="state.map.aggregationLayer" :display-variable="state.variable" :get-feature-value="state.map.getFeatureValue" :color-scale="state.map.colorScale" :render-tooltip="renderTooltip" :set-view="setMapView" :filters="state.xf" :selected="state.selected" v-on:select="selectFeature"></ice-map>
    <div class="ice-loading" v-show="show.loading">
      <h1>Loading</h1>
      <div><i class="fa fa-spinner fa-spin fa-5x fa-fw"></i></div>
    </div>
  </div>

  <div class="modal fade" tabindex="-1" role="dialog" id="modal-share">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title">Share</h4>
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-xs-12">
              <div class="input-group">
                <input type="text" class="form-control" :value="shareUrl" id="shareUrl">
                <span class="input-group-btn">
                  <button class="btn btn-default btn-copy" type="button" data-clipboard-target="#shareUrl"><span class="glyphicon glyphicon-copy"></span></button>
                </span>
              </div>
              <p>Copy this URL to share your current ICE view.</p>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

</div>

<script src="bower_components/jquery/dist/jquery.js"></script>
<script src="http://code.jquery.com/ui/1.12.0/jquery-ui.js"></script>
<script src="bower_components/bootstrap/dist/js/bootstrap.js"></script>
<script src="bower_components/bootstrap-select/dist/js/bootstrap-select.js"></script>
<script src="bower_components/d3/d3.js"></script>
<script src="js/bundle.js"></script>

</body>

</html>
